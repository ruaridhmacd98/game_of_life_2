(this.webpackJsonplife=this.webpackJsonplife||[]).push([[0],{102:function(t,e,s){"use strict";s.r(e);var n=s(1),a=s(0),i=s.n(a),l=s(12),c=s.n(l),o=s(5),r=s(3),h=s(4),u=s(6),f=s(51),d=s(35),v=s(50),g=(s(57),function(){return Object(n.jsx)(v.a,{trigger:Object(n.jsx)("button",{className:"button",children:" Tutorial "}),modal:!0,nested:!0,children:function(t){return Object(n.jsxs)("div",{className:"modal",children:[Object(n.jsx)("button",{className:"close",onClick:t,children:"\xd7"}),Object(n.jsx)("div",{className:"header",children:" Tutorial "}),Object(n.jsxs)("div",{className:"content",children:[" ","Take it in turns to place cells."]}),Object(n.jsx)("div",{className:"actions",children:Object(n.jsx)("button",{className:"button",onClick:function(){t()},children:"Got it."})})]})}})}),b=(s(58),function(){function t(){Object(r.a)(this,t),this.state={grid:new Map}}return Object(h.a)(t,[{key:"set",value:function(t,e,s){this.state.grid.has(e)||this.state.grid.set(e,new Map),this.state.grid.get(e).set(t,s)}},{key:"has",value:function(t,e){var s=!1;return this.state.grid.has(e)&&(s=this.state.grid.get(e).has(t)),s}},{key:"get",value:function(t,e){return this.state.grid.get(e).get(t)}},{key:"listCells",value:function(){var t=[];return this.state.grid.forEach((function(e,s,n){e.forEach((function(e,n,a){t.push([n,s])}))})),t}}]),t}()),j=function(){function t(){Object(r.a)(this,t)}return Object(h.a)(t,[{key:"iterate",value:function(t){var e=this.getCounts(t);return this.generateNewGrid(e,t)}},{key:"getCounts",value:function(t){for(var e=new b,s=t.listCells(),n=0;n<s.length;n++){var a,i,l=Object(o.a)(s[n],2);a=l[0],i=l[1];for(var c=t.get(a,i),r=-1;r<2;r++)for(var h=-1;h<2;h++)if(!(0===r&0===h)){var u=a+h,f=i+r;e.has(u,f)||e.set(u,f,{}),c in e.get(u,f)||(e.get(u,f)[c]=0),e.get(u,f)[c]++}}return e}},{key:"generateNewGrid",value:function(t,e){for(var s,n=new b,a=t.listCells(),i=0;i<a.length;i++){var l,c,r=Object(o.a)(a[i],2);l=r[0],c=r[1];var h=t.get(l,c),u=(s=h,Object.values(s).reduce((function(t,e){return t+e})));e.has(l,c)?2===u|3===u&&n.set(l,c,e.get(l,c)):3===u&&n.set(l,c,parseInt(function(t){return Object.keys(t).reduce((function(e,s){return t[e]>t[s]?e:s}))}(h)))}return n}}]),t}(),O=s(24),p=s.n(O),C=(s(24),{1:"#0000FF",2:"#FF0000",3:"#00FF00"}),w=[{label:"blue",value:1},{label:"red",value:2},{label:"green",value:3}],k=[{label:"cell",value:[[0,0]]},{label:"square",value:[[0,0],[1,0],[0,1],[1,1]]},{label:"glider",value:[[0,0],[0,1],[0,2],[1,0],[2,1]]}],m=function(t){Object(u.a)(s,t);var e=Object(f.a)(s);function s(){var t;return Object(r.a)(this,s),(t=e.call(this)).selectPattern=function(e){t.setState({patternToPlace:e.value})},t.selectColour=function(e){t.setState({colourToPlace:e.value})},t.updateRunning=function(){t.setState({isRunning:!t.state.isRunning})},t.state={width:null,height:null,ctx:null,isRunning:!0,isDragging:!1,mousePosition:[0,0],scale:10,centreOffset:[0,0],cells:x(),patternToPlace:[[0,0]],colourToPlace:1},t}return Object(h.a)(s,[{key:"componentDidMount",value:function(){var t=this,e=this.refs.canvas,s=e.getContext("2d");s.canvas.width=window.innerWidth,s.canvas.height=.8*window.innerHeight;var n=new j;this.setState({width:e.width}),this.setState({height:e.height}),p()("http://localhost:8080").emit("hi",{say:"hi"}),setInterval((function(){t.draw(),t.state.isRunning&&t.setState({cells:n.iterate(t.state.cells)})}),250)}},{key:"handleClick",value:function(t){var e=this.refs.canvas.getContext("2d"),s=t.clientX-e.canvas.offsetLeft,n=t.clientY-e.canvas.offsetTop,a=this.clientToCell([s,n]),i=Object(o.a)(a,2);s=i[0],n=i[1];for(var l=this.state.patternToPlace,c=0;c<l.length;c++)this.state.cells.set(l[c][0]+s,l[c][1]+n,this.state.colourToPlace);this.draw()}},{key:"handleWheel",value:function(t){var e=t.deltaY,s=this.state.scale,n=Object(o.a)(this.state.centreOffset,2),a=n[0],i=n[1];e>0?(s/=.9,a/=.9,i/=.9):s>1&&(s*=.9,a*=.9,i*=.9),this.setState({scale:s,centreOffset:[a,i]}),this.setState({mousePosition:[t.clientX,t.clientY]}),this.draw()}},{key:"handleMouseDown",value:function(t){this.setState({isDragging:!0,mousePosition:[t.clientX,t.clientY]})}},{key:"handleMouseUp",value:function(t){this.setState({isDragging:!1})}},{key:"handleMouseMove",value:function(t){if(this.state.isDragging){var e=Object(o.a)(this.state.centreOffset,2),s=e[0],n=e[1];s+=t.clientX-this.state.mousePosition[0],n+=t.clientY-this.state.mousePosition[1],this.setState({centreOffset:[s,n]})}this.setState({mousePosition:[t.clientX,t.clientY]}),this.draw()}},{key:"clientToCell",value:function(t){var e=Object(o.a)(t,2),s=e[0],n=e[1];return[Math.floor((s-this.state.width/2-this.state.centreOffset[0])/this.state.scale),Math.floor((n-this.state.height/2-this.state.centreOffset[1])/this.state.scale)]}},{key:"cellToClient",value:function(t){var e=Object(o.a)(t,2),s=e[0],n=e[1];return[Math.floor(s*this.state.scale+this.state.centreOffset[0]+this.state.width/2),Math.floor(n*this.state.scale+this.state.centreOffset[1]+this.state.height/2)]}},{key:"draw",value:function(){var t=this.refs.canvas.getContext("2d");t.fillStyle="#E0E0E0",t.fillRect(0,0,this.state.width,this.state.height);for(var e=this.state.cells.listCells(),s=0;s<e.length;s++){var n,a,i,l,c=Object(o.a)(e[s],2);n=c[0],a=c[1];var r=this.state.cells.get(n,a),h=this.cellToClient([n,a]),u=Object(o.a)(h,2);i=u[0],l=u[1],t.fillStyle=C[r],t.fillRect(i,l,.9*this.state.scale,.9*this.state.scale)}var f,d,v,g,b,j,O=this.state.patternToPlace,p=this.clientToCell(this.state.mousePosition),w=Object(o.a)(p,2);for(b=w[0],j=w[1],s=0;s<O.length;s++){f=O[s][0]+b,d=O[s][1]+j;var k=this.cellToClient([f,d]),m=Object(o.a)(k,2);v=m[0],g=m[1],t.globalAlpha=.5,t.fillStyle=C[this.state.colourToPlace],t.fillRect(v,g,.9*this.state.scale,.9*this.state.scale),t.globalAlpha=1}}},{key:"render",value:function(){var t=this;return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("header",{className:"App-header"}),Object(n.jsxs)("body",{children:[Object(n.jsx)("canvas",{ref:"canvas",onClick:function(e){return t.handleClick(e)},onWheel:function(e){return t.handleWheel(e)},onMouseDown:function(e){return t.handleMouseDown(e)},onMouseUp:function(e){return t.handleMouseUp(e)},onMouseMove:function(e){return t.handleMouseMove(e)}}),Object(n.jsx)(g,{}),Object(n.jsx)("button",{className:"button",onClick:this.updateRunning,children:this.state.isRunning?Object(n.jsx)("div",{children:"Stop"}):Object(n.jsx)("div",{children:"Start"})}),Object(n.jsx)(d.a,{onChange:this.selectPattern,options:k,placeholder:"Select Pattern"}),Object(n.jsx)(d.a,{onChange:this.selectColour,options:w,placeholder:"Select Colour"})]})]})}}]),s}(i.a.Component);function x(){var t=new b;return t.set(3,0,1),t.set(3,1,1),t.set(3,2,1),t.set(4,1,1),t.set(2,2,1),t.set(18,0,2),t.set(18,1,2),t.set(18,2,2),t.set(19,1,2),t.set(17,2,2),t.set(3,20,3),t.set(3,21,3),t.set(3,22,3),t.set(4,21,3),t.set(2,22,3),t}var y=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,103)).then((function(e){var s=e.getCLS,n=e.getFID,a=e.getFCP,i=e.getLCP,l=e.getTTFB;s(t),n(t),a(t),i(t),l(t)}))};c.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(m,{})}),document.getElementById("root")),y()},57:function(t,e,s){},58:function(t,e,s){}},[[102,1,2]]]);
//# sourceMappingURL=main.592f519d.chunk.js.map